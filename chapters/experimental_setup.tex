%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Chapter: Experimental setup %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{GA Parameters}
Chapter~\ref{ch:simulations} analyzed what the optimal parameter values were
for the genetic algorithm using evaluations based on the handcrafted model.
These parameter values will be used for the experiment as well, apart from one
exception. The number of individuals in the population was set back from ten
(as it was in the \texttt{erik} setup) to seven. This was out of precaution to
avoid the situation where a too large diversity would require more students to
show signs of convergence than would be available to the experiment. This set
the parameter values of the genetic algorithm in the experiment to the
following.\\\\
\begin{tabular}{ll}\hline
	\textbf{Parameter} &  \textbf{Value}\\\hline
	Population size & 7 \\
	Number of episodes & 10 \\
	Number of elite & 2 \\
	Mutation rate & 0.05 \\
	Minimum length & 1 \\
	Maximum length & 3 \\
\end{tabular}
\section{Student groups}
In order to reduce the number of required data points, the students were split
up in only two different student groups per knowledge component. The splitting
criteria was based on the achieved pre-test score. If a student scored more
than 50\% then he or she was assigned to the High group of that knowledge
component, else he or she was assigned to the Low group of that knowledge
component. This resulted in the following groups.\\\\
\begin{tabular}{lll}\hline
	\textbf{Knowledge Component} & \textbf{Pre-test score}    & \textbf{Group} \\\hline
	Rules of the game	& $\leq 50\%$		& Rules Low \\
	Rules of the game	& $> 50\%$			& Rules High \\
	Intuition			& $\leq 50\%$		& Intuition Low \\
	Intuition			& $> 50\%$			& Intuition High \\
	Binary Numbers		& $\leq 50\%$		& Binary Low \\
	Binary Numbers		& $> 50\%$			& Binary High \\
	Nim-Sum				& $\leq 50\%$		& NimSum Low \\
	Nim-Sum				& $> 50\%$			& NimSum High \\
\end{tabular}
\section{Educational material}
% TODO: Describe initial page of curriculum with explanation of the experiment
Participants in the experiment went through a curriculum about the game of Nim.
Nim is a mathematical game where two players alternate turns in taking away at
least one object from exactly one of stacks of objects on the table. The
experiment only looks at the normal version of the Nim game, where the person
that takes the last object of the table wins. In the mis\`{e}re version of the
game, this person would have lost. Nim is a zero-sum game and is part of a
large collection of related games which have mathematically grounded
strategies. Nim's winning strategy, provided you are in a winnable position,
involves applying the nim-sum operator. % Explain the nim-sum operator

The Nim curriculum is divided into four knowledge components. First, the rules
of the game are explained. Second, some intuition about good strategies is formed.
Third, binary numbers are covered. Fourth, the binary nim-sum operation is
explained. For each of these knowledge component, four educational resources
were created from scratch or composed of explanations found on the internet.
For the genetic algorithm to have a chance of learning something, it is
important that the collection of resources contains both good and bad material.
The resources for each knowledge component are described in
Appendix~\ref{ax_resources}, the rest of this section will describe
each knowledge component.
\paragraph{Rules of the game} The first knowledge component covers the rules
of the Nim game. The playing field of the game contains two or more stacks of
objects. Nim is played by two players that in turn take away at least
one object from exactly one stack of objects. The player that takes a way the
last object from the playing field wins.
\paragraph{Intuition} The intuition behind a winning strategy is the subject
of the second knowledge component. In any Nim game, it is desirable to leave
your opponent with two equally sized stacks. From that position, you can mimic
any move your opponent made and return to the same situation until only one
object is left for you to take away and win. The understanding that it is
beneficial to leave your opponent with two equal stacks is the intuition behind
the winning strategy for the Nim game.
\paragraph{Binary Numbers} The third knowledge component covers binary numbers.
In order to generalize the intuition to a winning strategy
for any winneable situation a student needs to be able to work with binary
representations of numbers. Specifically, a student needs to be to able to
convert decimal numbers into binary numbers.
\paragraph{Nim-Sum}
The key to winning the Nim game in any winnable situation is to leave the game
in a state where the nim-sum of the stacks is zero. The nim-sum operator is in
fact the \emph{exclusive or} (XOR) operator, which describes the sum of two
binary numbers neglecting all carries between digits. A different way to put
this is that the XOR operator outputs a `one' when exactly one of the two
inputs contains a `one', and 'zero' in any other case. In a winnable situation,
the nim-sum is not equal to zero at the beginning of your turn. You then remove a
number of objects from a single stack, such that the nim-sum becomes zero.
The nim-sum operator can not only be used to determine whether the nim-sum will
be zero after an action, it can also be used to identify which action you can take.

A slightly easier operation to perform mentally is to write down the stacks
underneath each other in binary format, count the number of `ones' in each
digit column ($2^0$, $2^1$, $2^2$ etc) and ensure that each column has an even
number of `ones'. In the resources used in this thesis this method is referred
to as \emph{pair cancelling}.
\section{Pre-test \& post-test}
In this experiment, each knowledege component has the same questions for both
the pre-test and post-test. Given the low threshold for participants to stop
participating in the experiment it was necessary to keep the time needed to
fill in the questions limited. This resulted in three multiple-choice
questions for each knowledge component. All questions have at least the option that
indicates that the user doesn't know the answer. This is still counted as a
wrong answer, but is more informative for later analysis than a random guess
which could be right by accident. The questions for each knowledge component
are listed in Appendix~\ref{ax_questions}.

\section{Exam}
\begin{figure}[ht]
    \centering
    \includegraphics[width=0.9\linewidth]{images/screen_exam.png}
    \caption{Screenshot of the exam setup with five nim game scenarios}
    \label{fig:screen_exam}
\end{figure}
After having completed all knowledge components, a student is presented a final
exam. The purpose of this exam is to have an opportunity to compare students at
the beginning of the experiment with those at the end. The exam questions are
nim game scenarios that the student has to play. The game interface is
described in Section~\ref{sec:apx_nimjs}. If the student wins, the
question is answered correctly. If the computer wins, the question is counted
as wrong. The exam grade is calculated as the percentage of won games. The result
of each game is displayed in a progress bar, as can be seen in
Figure~\ref{fig:screen_exam}. The exam is introduced with the following explanation.
\begin{framed}\noindent
	You will be playing 5 nim games of varying difficulty. This is your
	opportunity to show your learned skills. The orange rectangles represent
	stacks of objects. The number of objects on the stack is shown by the white
	number in the stack. You can take objects off a stack by clicking on it.
	You will then be asked how many objects you want to take. After you have
	made a move, your artificial counter player will make one as well. The game
	ends when either of you won.
	After you have played all 5 nim games you are finished.
\end{framed}
\noindent The nim game scenarios are not randomly generated and are increasing in
difficulty. The following list enumerates the game configurations for each
question.
\begin{enumerate}
	\item Two stacks consisting of one and two objects.
	\item Three stacks with two, three and two objects.
	\item Three stacks containing four, five and six objects.
	\item Four stacks consisting of one, three, four and five objects.
	\item Four stacks with ten, four, six and nine objects.
\end{enumerate}
\section{Questionaire}
At the end of the course, after all knowledge components and the exam have been
completed by the student. A small optional questionaire is presented to the
student. The questionaire consisted of two multiple choice questions and one
open ended question.
\begin{enumerate}
	\item How good were you at Nim before these lessons?
		\begin{itemize}
			\item I could not play it at all.
			\item I could play it a little bit.
			\item I could play it very well.
		\end{itemize}
	\item How good do you think you are after these lessons?
		\begin{itemize}
			\item I cannot play it at all.
			\item I can play it a little bit.
			\item I can play it very well.
		\end{itemize}
	\item Do you have any last comments you whish to make?
\end{enumerate}
\section{Dissemination to participants}
\subsection{Amazon Mechanical Turk}
Participants for the experiment are partly found via the Amazon Mechanical
Turk\footnote{\url{https://www.mturk.com/mturk/}} service, where tasks that are
currently not possible to execute using artificial intelligence can be done by
humans in return for a small fee in the form of Amazon credits. The site forms
a market place where a \emph{requester} can post a certain \emph{Human
Intelligence Task} (HIT) that he or she wants to have crowdsourced for a
certain price and where \emph{providers} choose which tasks they want to perform.
The \emph{provider} chooses the time and place of the execution, as most if not
all \emph{HIT}s are only bound to existance of an internet connnection. Only
when a \emph{provider} completes the \emph{HIT} to the approval of the
\emph{provider} will he or she be paid the agreed amount. A \emph{provider} is
not forced to finish a \emph{HIT} and can decide to give up participation at
any moment during the \emph{HIT}. Typically a preview is shown of the task
before the \emph{provider} makes the decision to accept.

In the context of this thesis, a \emph{HIT} represents an entire walkthrough of
the experiment including the different knowledge components and the final exam
of one participant. \emph{Providers} were initially paid ten cents for this task,
which was raised to twenty cents during the experiment to speed up the data
collection. All \emph{providers} that completed the experiment were paid,
regardless of the \emph{provider}'s performance or usefulness of the data.
\emph{Providers} that dropped out during the experiment were not paid, but the data
that was collected as a result of their actions so far was still kept.
\subsection{Social network}
Other participants were found via Twitter, Facebook, LinkedIn and Reddit. No
further explanation was given about the game or the nature of the experiment.
Participants that arrived at the experiment via these communication lines did
so without a form of financial reward as \emph{providers} did in Mechanical
Turk. The call on social networks was sent out in the second half of the
experiment.
